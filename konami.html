<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Konami Code!</title>
    <link rel="stylesheet" href="css/konami.css"



</head>
<body>
    <div id="container">
        <h1>Konami Code</h1>
<!--        <p>Click here to give the page focus and enter the Konami code!</p-->
    </div>

<!-- jQuery -->
    <script type="text/javascript" src="/js/jquery-3.6.0.js"></script>
    <script>
        "use strict";

        let keys = {
            37: "left",
            38: "up",
            39: "right",
            40: "down",
            65: "a",
            66: "b"
        };

        let konamiCode = ["up", "up", "down", "down", "left", "right", "left", "right", "b", "a"];
        let keyCount = 0;

        let timerID;

        document.addEventListener("keydown", checkCode, false);

        function checkCode(e) {
            let keyPressed = keys[e.keyCode];

            if (keyPressed === konamiCode[keyCount]) {
                keyCount++;

// clear timer
                window.clearTimeout(timerID);

// start timer with a 1 second delay before resetting state
                timerID = window.setTimeout(resetKeyState, 1000);

                if (keyCount === konamiCode.length) {
                    cheatCodeActivated();
                    resetKeyState();
                }
            } else {
                resetKeyState();
            }
        }

        function cheatCodeActivated() {
            alert("You have added 30 lives!");
        }

        function resetKeyState() {
            console.log("Resetting state!");
            window.clearTimeout(timerID);
            keyCount = 0;
        }



    </script>
</body>
</html>
